<!DOCTYPE html>
<html>
    <head>
        <title>Pigeon Post Online</title>
        <style>
        
            h1 {
                text-align:center;
                font-family: sans-serif;
                font-size: 48px;
                font-weight: 100;
                color: lightslategray;
            }
            
            input[type=text] {
                display: block;
                box-sizing: border-box;
                width: 400px;
                padding: 8px;
                border: 1px solid gainsboro;
                margin-bottom: 16px;
                font-size: 14px;
            }
            
            input[type=checkbox] {
                display: none;
            }
            
            button:focus {
                outline: none;
            }
            
            strong {
                font-weight: 400;
            }
            
            .checkbox {
            	width: 30px;
            	height: 10px;
            	background: lightslategray;
            	margin: 20px 0px;
            	position: relative;
            	border-radius: 3px;
            }
            
            .checkbox .checkbox-handle {
            	display: block;
            	width: 16px;
            	height: 16px;
            	border-radius: 50%;
            
            	transition: all .1s ease;
            	cursor: pointer;
            	position: absolute;
            	top: -3px;
            	left: -3px;
            
            	background: lightsteelblue;
            }
            
            .checkbox input[type=checkbox]:checked + .checkbox-handle {
            	left: 17px;
            }
            
            .checkbox .checkbox-label {
                font-family: sans-serif;
                padding-left: 40px;
                position: relative;
                top: -3px;
                color: lightslategray;
                cursor: pointer;
            }
            
            #docs {
                max-width: 800px;
                margin: 0 auto 40px;
            }
            
            #docs h3 {
                font-size: 24px;
                font-family: sans-serif;
                font-weight: 100;
                color: lightsteelblue;
            }
            
            #docs code {
                display: block;
                padding: 16px;
                margin-bottom: 16px;
                background-color: gainsboro;
            }
            
            #docs th {
                font-family: sans-serif;
                font-weight: 100;
                color: lightsteelblue;
                text-align: left;
                padding-right: 16px;
            }
            
            #docs td {
                font-family: sans-serif;
                font-weight: 100;
                font-size: 12px;
                vertical-align: top;
                color: lightslategray;
                padding-right: 16px;
            }
            
            #docs td:nth-child(2) {
                width: 100px;
            }
            
            #docs td.tabbed {
                padding-left: 20px;
            }
  
        
            #form {
                width: 400px;
                margin: 0 auto;
            }
            
            #form button {
                display: block;
                width: 200px;
                padding: 8px;
                border: 0;
                border-radius: 20px;
                color: white;
                font-family: sans-serif;
                font-size: 24px;
                font-weight: 100;
                background-color: lightsteelblue;
                cursor: pointer;
                transition: transform 0.2s ease-in-out;
            }
            
            #form button:active {
                transform: scale(0.75);
                transform-origin: 50%;
            }
            
            #secret {
                display:none;
                padding: 0;
                text-align: center;
                font-family: sans-serif;
                font-size: 24px;
                font-weight: 100;
                color: lightslategray;
            }
            
            #secret span {
                font-size:16px;
                line-height:48px;
                color: lightseagreen;
            }
            
            
            
        </style>
    </head>
    <body>
        <header>
            <h1>Pigeon Post</h1>
        </header>
        
        <div id="docs">
            <h3>Release a pigeon</h3>
            <code>POST pigeonpost.online/email</code>
            
            <table>
                <tr>
                    <th>PROPERTY</th>
                    <th>TYPE</th>
                    <th>REQUIRED</th>
                    <th>DESCRIPTION</th>
                </tr>
                <tr>
                    <td><strong>secret</strong></td>
                    <td>String</td>
                    <td>YES</td>
                    <td>Shh... don't tell anyone.</td>
                </tr>
                <tr>
                    <td><strong>to</strong></td>
                    <td>Array of Objects</td>
                    <td>YES</td>
                    <td>Our prime offerings. These birds are big and strong, fed the freshest grains twice a day by beautiful women.</td>
                </tr>
                <tr>
                    <td class="tabbed"><span class='tab'></span>address</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>Where should your bird fly?</td>
                </tr>
                <tr>
                    <td class="tabbed"><span class='tab'></span>name</td>
                    <td>String</td>
                    <td>NO</td>
                    <td>Written in our best calligraphy.</td>
                </tr>
                <tr>
                    <td><strong>cc</strong></td>
                    <td>Array of Objects</td>
                    <td>NO</td>
                    <td>A selection of smaller birds, kept in the back of the coop.</td>
                </tr>
                <tr>
                    <td class="tabbed">address</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>We'll pass this along, hopefully the birds don't forget.</td>
                </tr>
                <tr>
                    <td class="tabbed">name</td>
                    <td>String</td>
                    <td>NO</td>
                    <td>The name you'd like on the capsule, scribbled with a ball point pen.</td>
                </tr>
                <tr>
                    <td><strong>bcc</strong></td>
                    <td>Array of Objects</td>
                    <td>NO</td>
                    <td>Ninja's trained in the high mountains. Nobody will even know they were there. If we told you any more about these birds, we'd have to kill you.</td>
                </tr>
                <tr>
                    <td class="tabbed">address</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>We promise, our birds will never divulge this secret.</td>
                </tr>
                <tr>
                    <td class="tabbed">name</td>
                    <td>String</td>
                    <td>NO</td>
                    <td>The name you'd like on the capsule, written on flash paper with invisible ink.</td>
                </tr>
                <tr>
                    <td><strong>subject</strong></td>
                    <td>String</td>
                    <td>NO</td>
                    <td>Be sure to grab their attention, otherwise they might just eat the bird and not read the message!</td>
                </tr>
                <tr>
                    <td><strong>message</strong></td>
                    <td>Text/HTML</td>
                    <td>NO</td>
                    <td>The body of your message, make it a good one.</td>
                </tr>
                <tr>
                    <td><strong>attachments</strong></td>
                    <td>Array of Objects</td>
                    <td>NO</td>
                    <td>Our birds can carry a lot of weight, but don't weigh them down too heavily or the recipient might just send them back.</td>
                </tr>
                <tr>
                    <td class="tabbed">content</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>The attachment itself. (Pigeon Post Corp. takes no responsibility to damage sustained during transit)</td>
                </tr>
                <tr>
                    <td class="tabbed">type</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>The meme type of the attachment. Normally something unpronounceable by our pigeons like "application/pdf" or "image/jpg"</td>
                </tr>
                <tr>
                    <td class="tabbed">encoding</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>How the attachment is encoded. Should be one of 'base64', '7bit', '8bit', 'binary', or 'quoted-printable'.</td>
                </tr>
                <tr>
                    <td class="tabbed">filename</td>
                    <td>String</td>
                    <td>YES</td>
                    <td>We have a great set of stensils. What should we write?</td>
                </tr>
            </table>
        </div>
        
        <div id="form">
            <input id="name" type="text" name="name" placeholder="name"/>
            <input id="address" type="text" name="address" placeholder="email address"/>
            <input id="host" type="text" name="host" placeholder="host"/>
            <input id="port" type="text" name="port" placeholder="port"/>
            <input id="security" type="text" name="security" placeholder="security"/>
            <div class="checkbox">
          		<input type="checkbox" id="auth" name="auth"/>
        	  	<label for="auth" class="checkbox-handle"></label>
        	  	<label for="auth" class="checkbox-label">Authed</label>
          	</div>
            <input id="username" type="text" name="username" placeholder="username"/>
            <input id="password" type="text" name="password" placeholder="password"/>
            <button id="send">Create Coop</button>
        </div>
        
        <p id="secret">
            Shh... it's a secret. Keep it safe.<br/>
            <span></span>
        </p>
        
        <script   
            src="https://code.jquery.com/jquery-3.0.0.min.js"   
            integrity="sha256-JmvOoLtYsmqlsWxa7mDSLMwa6dZ9rrIdtrrVYRnDRH0="   
            crossorigin="anonymous">
        </script>
        
        <script>
             /*global $*/    
            
            $(function() {
                
                $("#send").click(function() {
                    var payload = {
                        name: $("#name").val(),
                        host: $("#host").val(),
                        port: $("#port").val(),
                        security: $("#security").val(),
                        auth: $("#auth").val(),
                        username: $("#username").val(),
                        password: $("#password").val(),
                        address: $("#address").val(),
                    };
                    
                    $.post("/coops", JSON.stringify(payload))
                        .done(function(res) {
                            var json = JSON.parse(res);
                            if(json.success) {
                                $("#form").hide();
                                $("#secret span").html(json.secret);
                                $("#secret").show();
                            }
                        });
                });
                
            });
        </script>
    </body>
</html>